{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2024-08-26/리액트-단일상태-객체화/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>1. 문제 파악</h2>\n<p>단일 상태로 관리중인 값을 다중 객체로 관리할 필요가 생겼다. 필요한 상태가 더 있다면 단일 상태를 추가하면 그만이지만, 이번 케이스는 기존 서비스의 변경을 최소화 하고 유지보수성을 향상 시키기 위해 적용하였다.</p>\n<p>예를 들면 이런 방식이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>food<span class=\"token punctuation\">,</span> setFood<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'미역국'</span><span class=\"token punctuation\">)</span>\r\n\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'오늘의 음식은 ${food} 입니다.'</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// 출력 : 오늘의 음식은 미역국 입니다.</span></code></pre></div>\n<p>이렇게 음식에 대한 상태를 사용 중이라고 생각 해보자.\r\n그런데, 국인지 밥인지에 따라 서비스에서 다르게 사용할 일이 생겼다.</p>\n</br>\n<h2>2. 해결방안 탐색</h2>\n<p>간단한 해결 방법으로는</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>food<span class=\"token punctuation\">,</span> setFood<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'미역국'</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>foodType<span class=\"token punctuation\">,</span> setFoodType<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'국'</span><span class=\"token punctuation\">)</span>\r\n\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'오늘의 음식(${foodType})은 ${food} 입니다.'</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">// 출력 : 오늘의 음식(국)은 미역국 입니다.</span></code></pre></div>\n<p>이렇게 구현하고 마는 쉬운 방법도 있겠지만, 데이터의 내용을 보면 foodType이 다양하게 관리될 가능성이 높아 보일 뿐 아니라, 이런식으로 계속 값이 증가하게 되면 관리의 어려움이 생기게 된다.</p>\n<p>(물론 내가 사용한 프로젝트가 음식관련은 아니다.. 포스팅을 위해 비슷한 예시로 변환하였다.)</p>\n</br>\n<h2>3. 해결방안 적용</h2>\n<h3>3-1. 적용한 방법</h3>\n<p>따라서 아래와 같은 방법으로 개선하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>food<span class=\"token punctuation\">,</span> setFood<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'미역국'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">foodType</span><span class=\"token operator\">:</span> <span class=\"token string\">'국'</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'오늘의 음식(${food.foodType})은 ${food.name} 입니다.'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이렇게 되면 상태 하나로 관리가 용이해질 수 있다.</p>\n<br/>\n<h3>3-2. 상태 업데이트 방법</h3>\n<p>영향을 받은 코드를 대략적으로 예시를 남기면 아래와 같다. 보통 React에서 대부분 사용하는 onChange 나 handler 함수들에 적용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 기존</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token comment\">// 변경</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token operator\">...</span>prevState<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>참고로 <code class=\"language-text\">...prevState</code>는 전개 연산자로, 여기서는 상태 업데이트 시 기존의 다른 상태들은 유지하고, 새로운 값을 갱신할 때 사용한다.</p>\n</br>\n<h2>4. 결론</h2>\n<p>리액트를 사용중인 엔지니어라면 대부분 잘 사용하는 부분이겠지만, 초심자를 위해 별도로 포스팅 하였다. 누군가는 도움이 되길 바라며 글을 마친다.</p>","frontmatter":{"title":"[React] 단일 상태 객체로 관리하기","summary":"React에서 단일 상태로 관리중인 값을 객체를 활용하여 다중 상태로 관리하는 방법에 대한 포스팅 입니다..","date":"2024.08.26.","categories":["React","NextJS"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkUlEQVR42mN4PG/jf2piBrob+HT+JiT2ZsoMfDR3w/87M9f8fzRvw/8nQINBbLINBBnwYM76/xNTC/9Pzyz7Pzun8v+q8tb/D4FiZLsQpPl037z/+1un/N/dNPH/0c6Z/x/OXU++C+/NXgs0aNL/fS1TgIZO/b+zYcL/2zNWg+XIjhRQOMIi5wk1kw3MYLqnQwAdUXiS6/qHIAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/c47ab7ad09324370f2e8e2f392f0a3a3/9b7d7/thumnail.png","srcSet":"/static/c47ab7ad09324370f2e8e2f392f0a3a3/5d231/thumnail.png 192w,\n/static/c47ab7ad09324370f2e8e2f392f0a3a3/e1116/thumnail.png 384w,\n/static/c47ab7ad09324370f2e8e2f392f0a3a3/9b7d7/thumnail.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/c47ab7ad09324370f2e8e2f392f0a3a3/a3a09/thumnail.webp 192w,\n/static/c47ab7ad09324370f2e8e2f392f0a3a3/5358b/thumnail.webp 384w,\n/static/c47ab7ad09324370f2e8e2f392f0a3a3/81e8e/thumnail.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":402}},"publicURL":"/static/c47ab7ad09324370f2e8e2f392f0a3a3/thumnail.png"}}}}]}},"pageContext":{"slug":"/2024-08-26/리액트-단일상태-객체화/"}},"staticQueryHashes":["3649515864","63159454"],"slicesMap":{}}